# Macro by Brett Verney (@wifiwizardofoz)
# Version: v0.1 | 1-10-2020
# Used for: Moving an IP address between VLANs without being disconnected from a session before configuration is complete

# Placeholders (find and replace)
# {NEW_MGMT_VLAN}
# {OLD_MGMT_VLAN}

# Configure macro
conf t
!
macro name ipmove
 no interface {OLD_MGMT_VLAN}
 interface {NEW_MGMT_VLAN}
 ip address 10.0.20.1 255.255.255.0
 snmp-server trap-source {NEW_MGMT_VLAN}
 ntp source {NEW_MGMT_VLAN}
 ip tacacs source-interface {NEW_MGMT_VLAN}
 @
!

# Execute macro
macro global apply vlmove
!
